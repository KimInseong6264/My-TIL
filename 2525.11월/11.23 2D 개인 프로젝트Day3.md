# 2025-11-23 TIL

## 오늘 배운 내용
- Unit 클래스 MVC 패턴 분리 완료
- Unit 클래스 상태 패턴 적용

## 느낀 점

### 1. MVC 패턴 좋기는 한데....

오늘 드디어 MVC 패턴으로 유닛 클래스를 완전히 분리하는데 성공했다!
<br>
(정확히는 하루가 지나고 화요일 새벽에 쓰고 있는 거지만...프로젝트 하느라 TIL 쓰기가 쉽지 않은...)
<br>
사실 토요일에 Model과 View에 대해서는 어느정도 구분을 해놓은 상태여서 오늘은 Controller를 중심으로 코드를 작성했다.
<br>
<br>
Controller의 핵심은 Modle과 View를 자연스럽게 이어주는 것인데, Model은 MonoBehaviour을 상속받지 않기 때문에
<br>
이 부분을 신경쓰면서 연결을 해주는 것이 포인트였다.
<br>
<br>
Controller에는 기본적인 입력을 받아낼 수 있는 형태의 메서드들을 구성하고 
<br>
**Model의 값은 new를 통해, View는 GetComponent로 받아와서 연결**을 해주었다.
<br>
처음에는 Controller를 어떻게 연결 시켜야 할지 걱정이 앞섰지만, 이미 상태 패턴이나 옵저버 패턴등을 사용하면서
<br>
**new나 delegate를 통한 다른 클래스 간의 연결하는 방식**들을 많이 익혀 놓아 생각보다 손쉽게 연결을 할 수 있었다.
<br>
<br>
MVC 패턴을 적용하고 나서 들었던 생각은 확실히 가독성, 유지보수 측면에서 굉장히 적절한 디자인 패턴이라는 것을 느꼈다.
<br>
일단 **데이터, 입력과 호출, 외부적 UI요소의 3가지 형태로 구분**이 되어 있다보니, 깔끔하게 코드가 정리되어 있는 것 같았다.
<br>
그래서 이 MVC 패턴은 앞으로 코드 작성을 하면서도 꾸준하게 사용하기에 좋은 디자인 패턴이 될 것 같았다.
<br>
<br>
다만...클래스의 이름이 그냥 일반 Unit에서 UnitModel, UnitController, UnitView로 나눠져 있다보니
<br>
스크립트를 찾을 때 항상 헷갈려서 3개의 클래스를 일일히 들여다보고 있는 내가..가장 문제인 거 같다...


### 2. 또 다시 찾아온 상태 패턴....

이번 프로젝트에서 상태 패턴을 제일 많이 쓰는 거 같다...
<br>
그만큼 좋은 디자인 패턴이라고 생각하며, 이번에는 **Unit의 상태에 따라 모션을 달리하고 싶어서** 상태 패턴을 쓰게 됐다.
<br>
일단 *턴제로 진행이 되는 구조이기에, 더욱이 상태 패턴이 적합하다고 많이 느끼기도 했다.
<br>
**턴제의 특성상 자신의 턴에 할 수 있는 행동이 제한되어 있고, 이것은 결국 상태 패턴과 조합이 좋을 수 밖에 없는 것이다.**
<br>
<br>
이번에 3번째로 구현을 하는 것이다보니, 어렵지 않게 코드를 작성할 수 있었다.
<br>
문제는 이미 Unit은 MVC 패턴으로 분리가 되어 있었기에, **두 가지 패턴을 접목 시키는 것이 핵심**이라고 볼 수 있었다.
<br>
결론부터 말하면 내가 상태 패턴을 적용시킨 것은 Controller였다.
<br>
**Controller가 결국 입력과 호출을 담당하기 때문에, 상태에 따른 변화도 Controller에서 제어를 하는 게 이상적이라고 판단했다.**
<br>
<br>
두 가지 패턴을 합쳐서 코드를 구성하면서 느낀 것은, 이 방법이 마냥 좋은 방법은 아닌 것 같다는 생각이 들었다.
<br>
사실 두 패턴 모두 유지보수와 가독성 향상에 좋은 패턴들이라고 생각은 한다.
<br>
하지만 MVC 중의 한 클래스가(주로 Controller) 상태 패턴으로 인해 코드의 양이 많아지고, 이로 인해 코드가 복잡해지는 것 같다고 느꼈다.
<br>
특히! **Unit 1개에 대한 내용이 최소 5개 이상으로 분리가 되다보니, 어떤 클래스에 뭐가 있었는지 추적하는 게 쉽지만은 않았다.**
<br>
물론 마냥 안 좋다는 게 아니라, 복잡해질 수 있는 우려가 있다고 개인적으로 판단이 되었을 뿐이다.
<br>
(처음이라 더 그렇게 느낀 걸 수도 있다..)
<br>
<br>
그럼에도 이 2가지 패턴을 섞어서 사용했을 때 가장 큰 장점이라 함은,
<br>
이후로 게임의 볼륨이 커지면 커질수록 패턴에 따라 클래스가 여러개로 분리가 되어 있는만큼 **확장성이 굉장히 좋아진다는 것이 있겠다.**


### 3. 마치며...

이제 개인 프로젝트 기간이 얼마 남지 않았다...
<br>
(이제 3일 지났으면서 이런 말을 한다는 거 자체가 이상할 수는 있겠지만...)
<br>
<br>
아직 해야 할 숙제들이 산 더미처럼 쌓여있고, 시간의 압박은 점차 나를 조여 오는 것 같다...
<br>
하지만 조금만 더 정신 차리고 집중하면 못 할 것도 없다고 본다.
<br>
<br>
특히, 프로젝트를 진행하면서 점차 **코드들에 대한 이해도와 응용능력이 점차 성장**하는 게 느껴지고,
<br>
**디자인 패턴들 사용하는 감각들도 점차 좋아지고 있어서** 후반으로 갈수록 작업 속도에 힘이 붙을 것이라고 믿는다!
<br>
남은 프로젝트 기간동안 후회없는 결과물 만들 수 있도록 더 집중하자!!


---

## 내용정리 블로그 링크






