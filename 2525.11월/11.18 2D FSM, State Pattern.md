# 2025-11-18 TIL

## 오늘 배운 내용
- FSM 스크립트 구현
- State Pattern의 스크립트 구현
- State 패턴을 사용한 미니게임 구현

## 느낀 점
말로만 들어왔던 FSM과 State 패턴을 오늘 드디어 배웠다.
<br>
이전 수업에서도 이 상태 패턴에 대해 계속해서 언급이 되었던만큼 중요한 개념이라는 것이 느껴졌다.
<br>
기본적인 개념은 **'상태'가 변하면 그 상태에 맞는 행동을 취한다.**라고 볼 수 있는데,
<br>
구현하는 것은 둘째치더라도 특정 상태만 정의를 잘 만들어놓는다면 외부의 변화에 맞춰서 자동적으로 동작 구현을 한다는 것이 특징이다.
<br>
<br>
따라서 게임AI요소를 만드는 것에 큰 강점을 보였다. 외부의 변화(플레이어와의 상호작용, 맵의 변화등)가 감지되었을 때,
<br>
변화에 맞춰서 자신의 '상태'만 바꿔주면 자동으로 변화된 '상태'에 해당하는 동작을 하게 된다.
<br>
그래서 상태 패턴을 잘 만들어놓는다면 몬스터AI, NPC의 AI등 자동적으로 바뀌어야 하는 게임요소들에 두루 사용이 가능할 것이다.
<br>
<br>
지금까지만 들어보면 이 상태패턴은 굉장히 좋은 패턴이라는 것을 알 수 있을 것이다. 하지만....
<br>
직접 미니게임을 구현하면서 이 패턴에서 가장 애를 먹은 것이, 특정 상태를 호출하는 부분이 계속 막혔다.
<br>
<br>
플레이어의 이동을 상태패턴으로 만들어보았는데, 이 입력을 받고 입력받은 내용을 해당 상태 클래스에 보내주는 것을 어떻게 해야할지 감을 못 잡았다.
<br>
입력받은 ctx값을 통째로 전달해보기도 했지만, value가 아닌 Button의 경우엔 ctx 자체보다 눌렸는지를 전달해야 하는 등,
<br>
입력값을 전달하는 것에서 애를 많이 먹었다. 이를 해결하려고 이동할 때 ctx의 밸류를 Vector로 저장해서 Run상태로 보내주는 것을 시도했다.
<br>
<br>
하지만 움직임은 동작하지 않았는데, 내가 정말 바보라는 걸 알았다...받은 Input값을 처음에 new할당 할 때만 받아주고 그 이후로 업데이트 되지 않았던 것이다.
<br>
그래서 Run상태의 Enter에서 입력값을 계속 초기화해주는 방식으로 이동구현을 했다...정말 바보같았다... 
<br>
<br>
이처럼 상태에 따라 구현하는 것 자체는 너무 좋은 방식이지만 상태 클래스들은 MonoBehaviour을 상속받지 않았기 때문에
<br>
상태를 전환해주는 부분을 잘 전달해주는 것이 필요하고 이를 잘 해결한다면 앞으로도 유용하게 사용할 수 있는 디자인 패턴이 될 것 같다.
<br>
상태 패턴은 기본적으로 몬스터의 AI, 게임 내 기후 변화, 특정 행동을 정의할 때에도 사용하기 좋을 것 같다.


---

## 내용정리 블로그 링크
- Unity[2D]3-1 FSM <br>
https://kiminseong6264.github.io/Blog/?post=%5B20251118%5D_%5BUnity%5B2D%5D3-1+FSM%5D_%5BUnity%5B2D%5D%5D_%5B%5D_%5B%EA%B0%84%EB%8B%A8%ED%95%9C+%EC%83%81%ED%83%9C%ED%8C%A8%ED%84%B4%EC%9D%80+FSM%EC%9C%BC%EB%A1%9C%21%5D_%5B%5D.md
<br> <br>
- Unity[2D]3-2 State Pattern <br>
https://kiminseong6264.github.io/Blog/?post=%5B20251118%5D_%5BUnity%5B2D%5D3-2+State+Pattern%5D_%5BUnity%5B2D%5D%5D_%5B%5D_%5B%EC%83%81%ED%83%9C%EC%97%90+%EB%94%B0%EB%9D%BC+%ED%96%89%EB%8F%99%EC%9D%84+%EC%A0%95%ED%95%98%EB%8A%94+%EC%83%81.%ED%83%9C.%ED%8C%A8.%ED%84%B4%21%5D_%5B%5D.md


